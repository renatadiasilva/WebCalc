<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html">
<h:body>

	<ui:composition>
		<div id="CHATROOM">
			<!-- Entrada -->
			<h:form rendered="#{!chatRoom.active}">

				<!-- Login -->
				<h:form rendered="#{chatRoom.login}">
					<h:form>
						<h:outputText value="Login" />
						<h:panelGrid columns="2">
							<h:outputText value="Name" />
							<h:inputText value="#{chatRoom.user}" />
							<h:outputText value="Password" />
							<h:inputSecret value="#{chatRoom.pass}" />
						</h:panelGrid>
						<h:commandButton value="Ok" action="#{chatRoom.loginChatter}" />
						<h:commandButton value="Signup"
							action="#{chatRoom.setLogin(false)}" />
					</h:form>
				</h:form>

				<!-- Signup -->
				<h:form rendered="#{!chatRoom.login}">
					<h:form>
						<h:outputText value="Signup" />
						<h:panelGrid columns="2">
							<h:outputText value="Name" />
							<h:inputText value="#{chatRoom.user}" />
							<h:outputText value="Password" />
							<h:inputSecret value="#{chatRoom.pass}" />
							<h:outputText value="Repeat Password" />
							<h:inputSecret value="#{chatRoom.repeatPass}" />
						</h:panelGrid>
						<h:commandButton value="Ok" action="#{chatRoom.signupChatter}" />
						<h:commandButton value="Login" action="#{chatRoom.setLogin(true)}" />
					</h:form>
				</h:form>
			</h:form>

			<!-- ChatRoom -->
			<f:ajax render="getServer:history getServer:onlineChatters">

				<h:form id="getServer" rendered="#{chatRoom.active}">

					<h:commandButton id="refresh" value="refresh"
						action="#{chatRoom.refresh}" />

					<!-- HistÃ³rico -->
					<h:dataTable id="history" value="#{chatRoom.chatHistory}"
						var="chatHistoryLine">
						<h:column>#{chatHistoryLine}</h:column>
					</h:dataTable>

					<!-- Chatter Activos -->
					<p>Active Chatters:</p>
					<h:dataTable id="onlineChatters" value="#{chatRoom.activeChatters}"
						var="activeChatters">
						<h:column>#{activeChatters}</h:column>
					</h:dataTable>

				</h:form>

			</f:ajax>

			<h:form id="chatRoom" rendered="#{chatRoom.active}">

				<!-- Submeter nova linha -->
				<h:form>
					<h:outputText value="#{chatRoom.activeChatter}" />
					<label> says: </label>
					<h:inputText value="#{chatRoom.chatLine}" />
					<h:commandButton value="Submit" action="#{chatRoom.submitChatLine}" />
					<h:commandButton value="Logout" action="#{chatRoom.logoutChatter}" />
				</h:form>

			</h:form>

			<script src="js/timer.js" />
		</div>
	</ui:composition>

</h:body>
</html>